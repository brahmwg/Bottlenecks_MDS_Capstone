---
title: "Trail for preprocessing - Survival Analysis"
output: html_notebook
---

# Imports

```{r}
library(readr)
```

# Data reading

```{r}
hatchery <- read_csv("../raw_data/hatchery.csv", show_col_types = FALSE)

downstream_hatch <- read_csv("../raw_data/downstream_hatch.csv", 
                             show_col_types = FALSE)

downstream_wild <- read_csv("../raw_data/downstream_wild.csv", 
                             show_col_types = FALSE)

microtroll_hatch <- read_csv("../raw_data/microtroll_hatch.csv", 
                             show_col_types = FALSE)

microtroll_wild <- read_csv("../raw_data/microtroll_wild.csv", 
                            show_col_types = FALSE)
```

The columns we want the final dataset to have is the following:

```{r}
columns <- colnames(microtroll_hatch)
columns
```

### Note on `action` column

`Action` can be taken care only after combining the whole dataset. The first instance of a tag_id is "tag" and the following instances is "detect".

# Pre-processing

## Stage 1: Hatchery

Notes: Why is all forklength NULL?

```{r}
head(hatchery)
```

```{r}

```

## Stage 2: Downstream

Notes: fork_length is all NULL in hatch

```{r}
head(downstream_hatch)
```

Notes: Change action unclip/clip to tag/detect

```{r}
head(downstream_wild)
```

## Stage 3: Estuary

```{r}

```

## Stage 4: Microtroll

Notes: action - change clip/unclip to tag/detect

```{r}
head(microtroll_hatch)
```

```{r}
head(microtroll_wild)
```

## Stage 5: Return

```{r}

```

# Combining cleaned dfs

```{r}
combined <- rbind(hatchery, downstream_hatch, downstream_wild, 
                  microtroll_hatch, microtroll_wild)
head(combined)
```

## `Action` column

Sometimes there is a data entry error, write script to make sure of tag and detect.

```{r}

```

# Save the dataset

```{r}
write.csv(combined, "../survival_analysis.csv")
```

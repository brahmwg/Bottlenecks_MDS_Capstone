model {
  b0 ~ dnorm(0, 1/100)
  b1 ~ dnorm(0, 1/100)
  phi[1] <- 1
  p[1] <- 1
  for (j in 2:J) {
    phi[j] ~ dbeta(x, 1)
    p[j] ~ dbeta(1, 1)
  }
  for (i in 1:N) {
    logit(phi_fish[i]) <- b0 + b1 * y[i, 1]
  }
  for (i in 1:N) {
    for (j in (f[i] + 1):J) {
      z[i, j] ~ dbern(phi[j] * z[i, j - 1])
      y[i, j] ~ dbern(p[j] * z[i, j])
    }
  }
}
